import{d as g,l as a,a as l}from"./HttpRequest-7fd341b5.js";import{_ as m,o as i,c,b as e,F as r,k as f,t as p,a as S,p as v,j as I}from"./index-aec3a869.js";const b={name:"ShoppingCart",data(){return{shopping:[{id:"",sid:"",sname:"",price:""}]}},methods:{buy(t,s){g("/shop/buy",{sid:t,uid:JSON.parse(window.localStorage.getItem("userInfo")).uid,oid:s}).then(n=>{n.data.code==1e3?a.msg("购买成功",{dialogIcon:"success"}):a.msg(n.data.msg,{dialogIcon:"error"})})},del(t){l("/cart/remove",{id:t}).then(s=>{s.data.code==1e3?(a.msg("删除成功",{dialogIcon:"success"}),this.getShopping()):a.msg("系统繁忙，请稍后重试",{dialogIcon:"error"})})},getShopping(){l("/cart/get",{uid:JSON.parse(window.localStorage.getItem("userInfo")).uid,isAfford:"0"}).then(t=>{t.data.code==1e3&&(this.shopping=t.data.list,console.log(this.shopping))})}},mounted(){this.getShopping()}},h=t=>(v("data-v-2e7b461f"),t=t(),I(),t),y=h(()=>e("h1",null,"购物车",-1)),k=h(()=>e("thead",null,[e("tr",null,[e("th",{class:"c1"},"商品名称"),e("th",null,"价格"),e("th",{class:"c2"},"操作")])],-1)),C={class:"c1"},x={class:"c2"},w=["onClick"],N=["onClick"];function j(t,s,n,B,_,d){return i(),c(r,null,[y,e("div",null,[e("table",null,[k,e("tbody",null,[(i(!0),c(r,null,f(_.shopping,o=>(i(),c("tr",{key:o.id},[e("th",C,p(o.sname),1),e("th",null,p(o.price),1),e("th",x,[e("a",{href:"javascript:void(0)",onClick:u=>d.buy(o.sid,o.id)},"购买",8,w),S("  "),e("a",{href:"javascript:void(0)",onClick:u=>d.del(o.id)},"删除",8,N)])]))),128))])])])],64)}const J=m(b,[["render",j],["__scopeId","data-v-2e7b461f"]]);export{J as default};
